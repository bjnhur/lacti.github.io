<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="blog">
	<meta name="author" content="lacti">
	<title>member-data-pointer와 pointer의 차이</title>
	<link href="/css/bootstrap.css" rel="stylesheet">
	<link href="/css/markdownpad-github.css" rel="stylesheet">
	<link href="/css/syntax.css" rel="stylesheet">
	<link href="/css/blog-post.css" rel="stylesheet">
</head>
<body>
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/">#</a>
			</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse navbar-ex1-collapse">
				<ul class="nav navbar-nav">
					<li><a href="/about/">about</a></li>
					<li><a href="http://twitter.com/lacti/">twitter</a></li>
					<li><a href="http://github.com/lacti/">github</a></li>
					<li><a href="/atom.xml">atom</a></li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container -->
	</nav>

	<div class="container">
				<div class="row">
			<div class="col-lg-8">
				<h1 class="page-title">member-data-pointer와 pointer의 차이</h1>
				<p><span class="glyphicon glyphicon-time"></span> Posted on 13 Oct 2012</p>
				<hr>
				<div class="content">
				<p>pointer는 메모리의 특정 공간의 주소를 지칭하기 위해 사용된다.</p>
<div class="highlight"><pre><code class="cpp language-cpp" data-lang="cpp"><span class="kt">float</span> <span class="n">some_var</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
<span class="kt">float</span><span class="o">*</span> <span class="n">float_ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">some_var</span><span class="p">;</span>
</code></pre></div>
<p>member data pointer는 구조체나 클래스의 특정 멤버 변수의 위치를 상대적으로 지칭하기 위해 쓰인다. 따라서 메모리 주소 값을 가지는 것이 아니라, 구조체나 클래스 객체에서 어디에 접근을 해야하는지의 정보를 담고 있다고 생각하면 된다.</p>
<div class="highlight"><pre><code class="cpp language-cpp" data-lang="cpp"><span class="k">struct</span> <span class="kt">tuple_t</span> <span class="p">{</span>
    <span class="kt">float</span> <span class="n">first</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">typedef</span> <span class="kt">float</span> <span class="kt">tuple_t</span><span class="o">::*</span><span class="kt">member_t</span><span class="p">;</span>
</code></pre></div>
<p>때문에 실제 메모리에 접근하기 위해서는 구조체나 클래스 객체가 있어야 하고, 접근할 때에도 dereference operator를 써주어야 한다.</p>
<div class="highlight"><pre><code class="cpp language-cpp" data-lang="cpp"><span class="kt">member_t</span> <span class="n">member</span> <span class="o">=</span> <span class="o">&amp;</span><span class="kt">tuple_t</span><span class="o">::</span><span class="n">first</span><span class="p">;</span>
<span class="kt">tuple_t</span> <span class="n">tuple</span><span class="p">;</span>
<span class="n">tuple</span><span class="p">.</span><span class="o">*</span><span class="n">member</span> <span class="o">=</span> <span class="mf">100.0f</span><span class="p">;</span>
</code></pre></div>
<p>위와 같이 <code>tuple.*member</code>를 통해 <code>member</code>가 가리키는 <code>first</code> 변수에 접근할 수 있었다. 이것은 <code>tuple</code> 객체 내에서 <code>member</code>가 가리키는 위치이고, <code>tuple</code>이라는 메모리 공간의 특정 지점에 접근을 하였으니 이제 float 값을 대입할 수 있는 것이다.</p>

<p>이제 float*로 저것을 가리킬 수 있다.</p>
<div class="highlight"><pre><code class="cpp language-cpp" data-lang="cpp"><span class="kt">float</span><span class="o">*</span> <span class="n">float_ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="p">(</span><span class="n">tuple</span><span class="p">.</span><span class="o">*</span><span class="n">member</span><span class="p">);</span>
</code></pre></div>
<p>요약하면,</p>

<ul>
<li>메모리 주소 값을 갖는 <code>float*</code>와는 다르게 member-data-pointer는 객체 내의 상대적 위치 정보를 갖기 때문에 바로 <code>float*</code>로 casting할 수는 없고,</li>
<li>객체를 두고 객체 내의 멤버를 접근한 다음(<code>.*</code> 혹은 <code>-&gt;*</code>)에야 메모리 주소인 <code>float*</code>로 가리킬 수 있게 된다는 것이다.</li>
</ul>

<p>member-data-pointer가 member의 위치를 어떻게 가리킬 수 있는지에 대한 세부 내용은 접어두더라도, 객체 내의 member 위치(<code>offset_of</code>)의 방법을 이해하면 굳이 member-data-pointer를 쓰지 않아도 비슷한 효과를 흉내낼 수 있다(c-style)</p>

<p>이에 대해서는 다음 글에서 알아보자.</p>

				</div>

				<div class="row">
					<div class="col-md-6">
					
						<a href="/2012/10/07/extract-code-using-member-data-pointer-3/" title="멤버 데이터 포인터를 사용하여 연산식 묶어내기 3">&laquo; 멤버 데이터 포인터를 사용하여 연산식 묶어내기 3</a>
					
					</div>
					<div class="col-md-6" style="text-align: right;">
					
						<a href="/2012/10/31/member-data-pointer-casting-safety/" title="멤버 데이터 포인터의 casting과 안정성 1">&raquo; 멤버 데이터 포인터의 casting과 안정성 1</a>
				
					</div>
				</div>
				<hr>

				<!-- the comments -->
				<div id="disqus_container">
					<div id="disqus_thread"></div>
					<script type="text/javascript">
						var disqus_shortname = 'lacti';
						(function() {
							var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
							dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
							(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
						})();
					</script>
					<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
					<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
				</div>
			</div>

			<div class="col-lg-4 sides">
			
				<div class="well">
					<h4 class="well-title">Related Posts</a></h4>
					<ul>
					
						<li><a href="/2012/10/31/member-data-pointer-casting-safety/">멤버 데이터 포인터의 casting과 안정성 1</a> <span class="date">31 Oct 2012</span></li>
					
						<li><a href="/2012/10/07/extract-code-using-member-data-pointer-3/">멤버 데이터 포인터를 사용하여 연산식 묶어내기 3</a> <span class="date">07 Oct 2012</span></li>
					
						<li><a href="/2012/10/03/extract-code-using-member-data-pointer-2/">멤버 데이터 포인터를 사용하여 연산식 묶어내기 2</a> <span class="date">03 Oct 2012</span></li>
					
						<li><a href="/2012/10/01/extract-code-using-member-data-pointer-1/">멤버 데이터 포인터를 사용하여 연산식 묶어내기 1</a> <span class="date">01 Oct 2012</span></li>
					
						<li><a href="/2014/05/29/ndc14-mobile-data-mining/">모바일 데이터 분석</a> <span class="date">29 May 2014</span></li>
					
						<li><a href="/2013/07/25/write-game-data/">게임 데이터 작성하기 1</a> <span class="date">25 Jul 2013</span></li>
					
					</ul>
				</div>
			

				<div class="well">
					<h4 class="well-title">Recent Posts <a href="/" class="show-all">(all)</a></h4>
					<ul>
					
						<li><a href="/2014/06/02/128-things-that-it-architect-doesn-t-do/">IT 아키텍트가 하지 말아야 할 128가지</a> <span class="date">02 Jun 2014</span></li>
					
						<li><a href="/2014/05/29/ndc14-tool-development/">팀을 구하는 툴 개발</a> <span class="date">29 May 2014</span></li>
					
						<li><a href="/2014/05/29/ndc14-the-npc-master/">THE NPCM@STER - 라이브 게임에 어울리는 스토리 텔링의 접근법</a> <span class="date">29 May 2014</span></li>
					
						<li><a href="/2014/05/29/ndc14-mobile-data-mining/">모바일 데이터 분석</a> <span class="date">29 May 2014</span></li>
					
						<li><a href="/2014/05/29/ndc14-live-methodology/">신입 프로그래머들의 고민을 통해 생각해보는 누구나 쉽게 적응할 수 있는 프로젝트 만들기</a> <span class="date">29 May 2014</span></li>
					
						<li><a href="/2014/05/29/ndc14-dungeon-and-fighter-loader-optimization/">Ndc14 Dungeon And Fighter Loader Optimization</a> <span class="date">29 May 2014</span></li>
					
					</ul>
				</div>
			</div>
		</div>

		
		<footer>
			<hr>
			<div class="row">
				<div class="col-lg-12">
					<em>&copy; 2008-2014 Jaeyoung Choi</em>
				</div>
			</div>
		</footer>
	</div>
	<!-- /.container -->

	<!-- JavaScript -->
	<script src="/js/jquery-1.10.2.js"></script>
	<script src="/js/bootstrap.js"></script>
</body>
</html>
